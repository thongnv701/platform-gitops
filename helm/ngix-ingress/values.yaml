controller:
  # Use hostNetwork to bind directly to host ports 80/443 for Cloudflare proxy compatibility
  hostNetwork: true
  # Service configuration - ClusterIP is sufficient with hostNetwork
  service:
    type: ClusterIP
  admissionWebhooks:
    enabled: true
    patch:
      enabled: true
  config:
    # Cloudflare proxy compatibility settings
    use-forwarded-headers: "true"
    compute-full-forwarded-for: "true"
    # Use Cloudflare's real IP header for proper client IP tracking
    real-ip-header: "CF-Connecting-IP"
    use-proxy-protocol: "false"
    proxy-read-timeout: "180"
    proxy-send-timeout: "180"
    proxy-body-size: "100m"
    keep-alive: "75"
    keep-alive-requests: "100"
  metrics:
    enabled: true
    serviceMonitor:
      enabled: true
      namespace: monitoring
      additionalLabels:
        release: prometheus-operator